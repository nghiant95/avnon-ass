import { createReducer, on } from '@ngrx/store';
import { produce } from 'immer';
export function createSliceReducer(initialState, actions, reducers, extraReducers) {
    const reducerArgs = [];
    const extra = (extraReducers || []);
    for (const [reducerKey, reducer] of Object.entries(reducers)) {
        const typeOfReducer = typeof reducer;
        if (typeOfReducer === 'function') {
            reducerArgs.push(on(actions[reducerKey], (state, payload) => produce(state, (draft) => reducer(draft, payload))));
            continue;
        }
        Object.keys(reducer).forEach((asyncKey) => {
            const asyncReducer = reducer[asyncKey];
            reducerArgs.push(on(actions[reducerKey][asyncKey], (state, payload) => produce(state, (draft) => asyncReducer(draft, payload))));
        });
    }
    return createReducer(initialState, ...reducerArgs.concat(extra));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlLXNsaWNlLXJlZHVjZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9uZ3J4LXNsaWNlL3NyYy9saWIvY3JlYXRlLXNsaWNlLXJlZHVjZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLGFBQWEsRUFBRSxFQUFFLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDaEQsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE9BQU8sQ0FBQztBQVFoQyxNQUFNLFVBQVUsa0JBQWtCLENBS2hDLFlBQXdCLEVBQ3hCLE9BQStDLEVBQy9DLFFBQXNCLEVBQ3RCLGFBSWtCO0lBRWxCLE1BQU0sV0FBVyxHQUFHLEVBQWtDLENBQUM7SUFDdkQsTUFBTSxLQUFLLEdBQWlDLENBQUMsYUFBYSxJQUFJLEVBQUUsQ0FFL0QsQ0FBQztJQUVGLEtBQUssTUFBTSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1FBQzVELE1BQU0sYUFBYSxHQUFHLE9BQU8sT0FBTyxDQUFDO1FBRXJDLElBQUksYUFBYSxLQUFLLFVBQVUsRUFBRTtZQUNoQyxXQUFXLENBQUMsSUFBSSxDQUNkLEVBQUUsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUE2QixFQUFFLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQ3JFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFFLE9BQWUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FDNUQsQ0FDRixDQUFDO1lBQ0YsU0FBUztTQUNWO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsRUFBRTtZQUN4QyxNQUFNLFlBQVksR0FBSSxPQUFrRCxDQUN0RSxRQUFRLENBQ1QsQ0FBQztZQUNGLFdBQVcsQ0FBQyxJQUFJLENBQ2QsRUFBRSxDQUNDLE9BQU8sQ0FBQyxVQUFVLENBQThDLENBQy9ELFFBQVEsQ0FDVCxFQUNELENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxFQUFFLENBQ2pCLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FDMUQsQ0FDRixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7S0FDSjtJQUVELE9BQU8sYUFBYSxDQUFDLFlBQVksRUFBRSxHQUFJLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFTLENBQUMsQ0FBQztBQUM1RSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBBY3Rpb25DcmVhdG9yLCBBY3Rpb25SZWR1Y2VyIH0gZnJvbSAnQG5ncngvc3RvcmUnO1xuaW1wb3J0IHsgY3JlYXRlUmVkdWNlciwgb24gfSBmcm9tICdAbmdyeC9zdG9yZSc7XG5pbXBvcnQgeyBwcm9kdWNlIH0gZnJvbSAnaW1tZXInO1xuaW1wb3J0IHR5cGUge1xuICBDYXNlUmVkdWNlcixcbiAgU2xpY2VBY3Rpb25zLFxuICBTbGljZUNhc2VSZWR1Y2VycyxcbiAgU2xpY2VPcHRpb25zLFxufSBmcm9tICcuL3R5cGluZ3MnO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2xpY2VSZWR1Y2VyPFxuICBTbGljZVN0YXRlIGV4dGVuZHMgb2JqZWN0LFxuICBTbGljZU5hbWUgZXh0ZW5kcyBzdHJpbmcgPSBzdHJpbmcsXG4gIENhc2VSZWR1Y2VycyBleHRlbmRzIFNsaWNlQ2FzZVJlZHVjZXJzPFNsaWNlU3RhdGU+ID0gU2xpY2VDYXNlUmVkdWNlcnM8U2xpY2VTdGF0ZT5cbj4oXG4gIGluaXRpYWxTdGF0ZTogU2xpY2VTdGF0ZSxcbiAgYWN0aW9uczogU2xpY2VBY3Rpb25zPFNsaWNlU3RhdGUsIENhc2VSZWR1Y2Vycz4sXG4gIHJlZHVjZXJzOiBDYXNlUmVkdWNlcnMsXG4gIGV4dHJhUmVkdWNlcnM/OiBTbGljZU9wdGlvbnM8XG4gICAgU2xpY2VOYW1lLFxuICAgIFNsaWNlU3RhdGUsXG4gICAgQ2FzZVJlZHVjZXJzXG4gID5bJ2V4dHJhUmVkdWNlcnMnXVxuKTogQWN0aW9uUmVkdWNlcjxTbGljZVN0YXRlPiB7XG4gIGNvbnN0IHJlZHVjZXJBcmdzID0gW10gYXMgQXJyYXk8UmV0dXJuVHlwZTx0eXBlb2Ygb24+PjtcbiAgY29uc3QgZXh0cmE6IEFycmF5PFJldHVyblR5cGU8dHlwZW9mIG9uPj4gPSAoZXh0cmFSZWR1Y2VycyB8fCBbXSkgYXMgQXJyYXk8XG4gICAgUmV0dXJuVHlwZTx0eXBlb2Ygb24+XG4gID47XG5cbiAgZm9yIChjb25zdCBbcmVkdWNlcktleSwgcmVkdWNlcl0gb2YgT2JqZWN0LmVudHJpZXMocmVkdWNlcnMpKSB7XG4gICAgY29uc3QgdHlwZU9mUmVkdWNlciA9IHR5cGVvZiByZWR1Y2VyO1xuXG4gICAgaWYgKHR5cGVPZlJlZHVjZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlZHVjZXJBcmdzLnB1c2goXG4gICAgICAgIG9uKGFjdGlvbnNbcmVkdWNlcktleV0gYXMgdW5rbm93biBhcyBBY3Rpb25DcmVhdG9yLCAoc3RhdGUsIHBheWxvYWQpID0+XG4gICAgICAgICAgcHJvZHVjZShzdGF0ZSwgKGRyYWZ0KSA9PiAocmVkdWNlciBhcyBhbnkpKGRyYWZ0LCBwYXlsb2FkKSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIE9iamVjdC5rZXlzKHJlZHVjZXIpLmZvckVhY2goKGFzeW5jS2V5KSA9PiB7XG4gICAgICBjb25zdCBhc3luY1JlZHVjZXIgPSAocmVkdWNlciBhcyB1bmtub3duIGFzIFJlY29yZDxzdHJpbmcsIENhc2VSZWR1Y2VyPilbXG4gICAgICAgIGFzeW5jS2V5XG4gICAgICBdO1xuICAgICAgcmVkdWNlckFyZ3MucHVzaChcbiAgICAgICAgb24oXG4gICAgICAgICAgKGFjdGlvbnNbcmVkdWNlcktleV0gYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCBBY3Rpb25DcmVhdG9yPilbXG4gICAgICAgICAgICBhc3luY0tleVxuICAgICAgICAgIF0sXG4gICAgICAgICAgKHN0YXRlLCBwYXlsb2FkKSA9PlxuICAgICAgICAgICAgcHJvZHVjZShzdGF0ZSwgKGRyYWZ0KSA9PiBhc3luY1JlZHVjZXIoZHJhZnQsIHBheWxvYWQpKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZVJlZHVjZXIoaW5pdGlhbFN0YXRlLCAuLi4ocmVkdWNlckFyZ3MuY29uY2F0KGV4dHJhKSBhcyBhbnkpKTtcbn1cbiJdfQ==